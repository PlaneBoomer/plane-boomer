# Hackthon目标

实现炸飞机游戏App：
游戏形式：每局的配置固定2个玩家，16 * 16的场地，3个飞机的模型
博弈形式：
  - 简单博弈：每局约定好赌注，把对方的三架飞机炸完之后，赢得赌注（时间不够的话就实现这种）
  - 复杂博弈：每局约定好起始赌注，每被炸掉一架飞机可以按德州的规则加注
  

# 技术栈
Ably做数据通信，nextjs做前后端，部署在Vercel上，数据库也用vercel storage

# 简单博弈方案设计
合约需要存储的数据：
```
{
  roomID: {
    players: [addressA, addressB],
    playersInfo: {
      addressA: {
        planes: [positionA, positionB, positionC],
        keys: [key-a1, key-a2, key-a3, key-a4, ...], // 256个密钥
      },
      addressB: {
        planes: [positionA, positionB, positionC],
        keys: [key-a1-2, key-a2-2, key-a3-2, key-a4-2, ...], // 256个密钥
      },
    },
    bet: 10 eth // 赌注
    first: addressA
  }
}
```


一局游戏有三方：
  - 玩家A
  - 玩家B
  - 庄家

庄家：负责在合约中创建房间，写入房间的玩家players, 开局（写入first）
玩家：
  - 摆好飞机，约定好赌注后，往合约中写入自己飞机的位置，以及自己棋盘上每个棋格的密码 (playersInfo)
  - 开局后，由first玩家开始，通过ably信道与对手通信：
    - 玩家A：
      - 发送消息「我要下在你的[a, 1]位置，你这个位置的密码是多少」
    - 玩家B：
      - 发送消息「我[a, 1]位置的密码是key-a1
      - 发送消息「我要下在你的[b, 4]位置，你这个位置的密码是多少」
    - 玩家A：
      - 通过key1去向合约查询下在该位置的结果（合约查询函数应该是pure函数）
      - 发送消息「我[b, 4]位置的密码是key-b4-2」
      - 我要下在你的[c, 7]位置，你在该位置的密码是多少
    - ......

- 当一名玩家找到对方三架飞机的位置后，可以拿三架飞机的位置去向合约发起提币交易
- 如果有玩家中途不玩了，则剩下的玩家可以拿自己已经知道的对方玩家的棋盘key向合约发起申诉，合约可以根据申诉信息判定是哪个玩家弃局
